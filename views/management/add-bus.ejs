<div class="container animate__animated animate__fadeIn">
  <div class="row mb-4">
    <div class="col-12">
      <div class="card shadow-sm border-success">
        <div class="card-body d-md-flex justify-content-between align-items-center">
          <div>
            <h2 class="card-title">
              <i class="fas fa-plus-circle text-success me-2"></i> Add New Bus
            </h2>
            <p class="text-muted mb-md-0">Register a new bus in the system ðŸšŒ</p>
          </div>
          <div class="mt-3 mt-md-0">
            <a href="/management/buses" class="btn btn-outline-secondary">
              <i class="fas fa-arrow-left me-1"></i> Back to Bus List
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card shadow-sm mb-4 mb-md-0">
        <div class="card-header bg-light">
          <h5 class="mb-0">
            <i class="fas fa-bus-alt text-success me-2"></i> Bus Information
          </h5>
        </div>
        <div class="card-body">
          <% if(typeof error_msg !== 'undefined' && error_msg.length > 0) { %>
            <div class="alert alert-danger animate__animated animate__shakeX">
              <%= error_msg %>
            </div>
          <% } %>
          <% if(typeof success_msg !== 'undefined' && success_msg.length > 0) { %>
            <div class="alert alert-success animate__animated animate__bounceIn">
              <%= success_msg %>
            </div>
          <% } %>
          
          <form action="/management/buses/add" method="POST">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="busName" class="form-label">Bus Name <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-tag"></i></span>
                  <input type="text" class="form-control" id="busName" name="busName" placeholder="College Express" required>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="busId" class="form-label">Bus ID <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                  <input type="text" class="form-control" id="busId" name="busId" placeholder="BUS101" required>
                </div>
                <div class="form-text">Unique identifier for driver login</div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="busNumber" class="form-label">Bus Number <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-hashtag"></i></span>
                  <input type="text" class="form-control" id="busNumber" name="busNumber" placeholder="B-001" required>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="plateNumber" class="form-label">Plate Number <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-car"></i></span>
                  <input type="text" class="form-control" id="plateNumber" name="plateNumber" placeholder="ABC-1234" required>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="driverName" class="form-label">Driver Name <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-user"></i></span>
                  <input type="text" class="form-control" id="driverName" name="driverName" placeholder="John Driver" required>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="route" class="form-label">Route <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-route"></i></span>
                  <input type="text" class="form-control" id="route" name="route" placeholder="Campus â†” City Center" required>
                </div>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-4 mb-3">
                <label for="capacity" class="form-label">Capacity <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-users"></i></span>
                  <input type="number" class="form-control" id="capacity" name="capacity" min="1" max="100" value="40" required>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="pin" class="form-label">PIN <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-key"></i></span>
                  <input type="password" class="form-control" id="pin" name="pin" placeholder="4-digit PIN" required>
                </div>
                <div class="form-text">For driver login</div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="confirmPin" class="form-label">Confirm PIN <span class="text-danger">*</span></label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-lock"></i></span>
                  <input type="password" class="form-control" id="confirmPin" name="confirmPin" placeholder="Confirm PIN" required>
                </div>
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="currentLocation" class="form-label">Current Location</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                  <input type="text" class="form-control" id="currentLocation" name="currentLocation" value="College Campus">
                </div>
              </div>
              <div class="col-md-6">
                <label for="notes" class="form-label">Notes</label>
                <textarea class="form-control" id="notes" name="notes" rows="1" placeholder="Additional notes about this bus"></textarea>
              </div>
            </div>
            
            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="isActive" name="isActive" checked>
              <label class="form-check-label" for="isActive">Bus is active and ready for service</label>
            </div>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
              <button type="reset" class="btn btn-outline-secondary">
                <i class="fas fa-eraser me-1"></i> Reset
              </button>
              <button type="submit" class="btn btn-success">
                <i class="fas fa-plus-circle me-1"></i> Add Bus
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <div class="col-md-4">
      <div class="card shadow-sm animate__animated animate__fadeInRight">
        <div class="card-header bg-light">
          <h5 class="mb-0">
            <i class="fas fa-info-circle text-primary me-2"></i> Adding a New Bus
          </h5>
        </div>
        <div class="card-body">
          <div class="text-center mb-4">
            <i class="fas fa-bus-alt fa-4x text-success mb-3"></i>
            <h5>Bus Registration Guide</h5>
          </div>
          
          <div class="mb-3">
            <h6 class="border-bottom pb-2 text-success"><i class="fas fa-check-circle me-2"></i> Required Fields</h6>
            <ul class="list-group list-group-flush small">
              <li class="list-group-item d-flex align-items-center py-2">
                <i class="fas fa-tag text-primary me-2"></i> <strong>Bus Name:</strong> 
                <span class="ms-1">A descriptive name for the bus</span>
              </li>
              <li class="list-group-item d-flex align-items-center py-2">
                <i class="fas fa-id-card text-primary me-2"></i> <strong>Bus ID:</strong> 
                <span class="ms-1">Unique ID for driver login</span>
              </li>
              <li class="list-group-item d-flex align-items-center py-2">
                <i class="fas fa-hashtag text-primary me-2"></i> <strong>Bus Number:</strong> 
                <span class="ms-1">Fleet identification number</span>
              </li>
              <li class="list-group-item d-flex align-items-center py-2">
                <i class="fas fa-car text-primary me-2"></i> <strong>Plate Number:</strong> 
                <span class="ms-1">Vehicle registration plate</span>
              </li>
            </ul>
          </div>
          
          <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i> <strong>Note:</strong> 
            <p class="small mb-0">The Bus ID will be used by the driver to log in to the system along with the PIN. Make sure to provide a unique ID that is easy to remember.</p>
          </div>
          
          <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i> <strong>Important:</strong> 
            <p class="small mb-0">The PIN should be secure but easy for the driver to remember. Consider using a 4-digit number like a year or last 4 digits of a phone number.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // PIN validation
    const pinInput = document.getElementById('pin');
    const confirmPinInput = document.getElementById('confirmPin');
    
    if (pinInput && confirmPinInput) {
      confirmPinInput.addEventListener('input', function() {
        if (pinInput.value !== confirmPinInput.value) {
          confirmPinInput.setCustomValidity("PINs don't match");
        } else {
          confirmPinInput.setCustomValidity('');
        }
      });
      
      pinInput.addEventListener('input', function() {
        if (pinInput.value && confirmPinInput.value && pinInput.value !== confirmPinInput.value) {
          confirmPinInput.setCustomValidity("PINs don't match");
        } else {
          confirmPinInput.setCustomValidity('');
        }
      });
    }
  });
</script> 